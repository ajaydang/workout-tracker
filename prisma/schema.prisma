generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  Int                   @id @default(autoincrement())
  username            String?
  email               String                @unique
  password            String?
  createdAt           DateTime              @default(now())
  updatedAt           DateTime              @updatedAt
  scheduleWorkout     ScheduleWorkout[]
  workoutPlan         WorkoutPlan[]
  workoutPlanExercise WorkoutPlanExercise[]
}

model WorkoutPlan {
  id                  Int                   @id @default(autoincrement())
  name                String
  user_id             Int
  createdAt           DateTime              @default(now())
  updatedAt           DateTime              @updatedAt
  user                User                  @relation(fields: [user_id], references: [id])
  workoutPlanExercise WorkoutPlanExercise[]
}

model Exercise {
  id                  Int                   @id @default(autoincrement())
  name                String
  description         String
  category            ExerciseCategory
  createdAt           DateTime              @default(now())
  updatedAt           DateTime              @updatedAt
  muscle_group        String
  scheduleWorkout     ScheduleWorkout[]
  workoutPlanExercise WorkoutPlanExercise[]
}

model WorkoutPlanExercise {
  id              Int               @id @default(autoincrement())
  user_id         Int
  workout_id      Int
  exercise_id     Int
  sets            Int
  reps            Int
  weight          Int
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt
  scheduleWorkout ScheduleWorkout[]
  exercise        Exercise          @relation(fields: [exercise_id], references: [id])
  user            User              @relation(fields: [user_id], references: [id])
  workoutPlan     WorkoutPlan       @relation(fields: [workout_id], references: [id])
}

model ScheduleWorkout {
  id                       Int                 @id @default(autoincrement())
  workout_plan_exercise_id Int
  user_id                  Int
  exercise_id              Int
  schedule_date            DateTime
  completed                Boolean
  createdAt                DateTime            @default(now())
  updatedAt                DateTime            @updatedAt
  exercise                 Exercise            @relation(fields: [exercise_id], references: [id])
  user                     User                @relation(fields: [user_id], references: [id])
  workoutPlanExercise      WorkoutPlanExercise @relation(fields: [workout_plan_exercise_id], references: [id])
}

enum ExerciseCategory {
  Cardio
  Strength
}
